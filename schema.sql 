create extension if not exists pgcrypto;

create table if not exists participants (
  id uuid primary key default gen_random_uuid(),
  first_name text not null,
  last_name text not null,
  guardian_name text,
  address_line text,
  city text,
  postal_code text,
  phone text,
  email text,
  sex text,
  age integer,
  medical_history text,
  created_at timestamptz not null default now()
);

create table if not exists consents (
  id uuid primary key default gen_random_uuid(),
  participant_id uuid not null references participants(id) on delete cascade,
  physio boolean default false,
  ergo boolean default false,
  logo boolean default false,
  diet boolean default false,
  gait_analysis boolean default false,
  counseling boolean default false,
  video_capture boolean default false,
  data_processing boolean default false,
  data_transfer_outside_eu boolean default false,
  biomedical_capture boolean default false,
  signed_at date,
  created_at timestamptz not null default now()
);